{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto/webpack/bootstrap","webpack://mesto/webpack/runtime/define property getters","webpack://mesto/webpack/runtime/hasOwnProperty shorthand","webpack://mesto/./src/components/popup.js","webpack://mesto/./src/components/secret.js","webpack://mesto/./src/components/api.js","webpack://mesto/./src/components/card.js","webpack://mesto/./src/components/validate.js","webpack://mesto/./src/components/utils.js","webpack://mesto/./src/components/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function closePopup(popup) {\r\n  popup.classList.remove('popup_opened');\r\n  document.removeEventListener('keyup', popup.ESChandler);\r\n  popup.ESChandler = null;\r\n}\r\n\r\n// слушатель событий, который закрывает модальное окно по нажатию на Esc, добавляется при открытии\r\n// модального окна и удаляется при его закрытии.\r\n\r\n// возвращает колбэк для навешивания на нажатие esc\r\nfunction closeOnEscape(popup){\r\n  return (evt) => {\r\n    if (evt.key === \"Escape\")\r\n      closePopup(popup);\r\n  }\r\n}\r\n\r\nfunction openPopup(popup) {\r\n  popup.classList.add('popup_opened');\r\n  popup.ESChandler = closeOnEscape(popup);\r\n  document.addEventListener('keyup',popup.ESChandler);\r\n}\r\n\r\nexport {openPopup, closePopup}\r\n","const COHORT = 'plus-cohort-11';\nconst TOKEN = '7da4e682-e653-495f-9d74-1a03b7d57194';\nexport {COHORT, TOKEN};\n","import {TOKEN, COHORT} from './secret.js';\nimport {refreshLikes} from \"./card.js\";\n\nconst config = {\n  baseUrl: 'https://nomoreparties.co/v1/' + COHORT,\n    headers: {\n      authorization: TOKEN,\n      'Content-Type': 'application/json'\n    }\n}\n\nconst URLs = {\n  cards: '/cards',\n  me: '/users/me',\n  like: '/cards/likes/',\n  avatar: '/users/me/avatar'\n}\n\nfunction checkResponse(res, errorMes) {\n  if (res.ok) {\n    return res.json();\n  }\n  // если ошибка, отклоняем промис\n  return Promise.reject(`${errorMes + res.status}`);\n}\n\nexport function getInitialCards(){\n  return fetch(config.baseUrl + URLs.cards, {headers: config.headers})\n    .then(res => checkResponse(res, 'Ошибка getInitialCards: '))\n}\n\nexport function getMe(){\n  return fetch(config.baseUrl + URLs.me,{headers: config.headers})\n    .then(res => checkResponse(res, 'Ошибка getMe: '))\n}\n\nexport function editAvatar(url){\n  return fetch(config.baseUrl + URLs.avatar, {\n    method: 'PATCH',\n    headers:  config.headers,\n    body: JSON.stringify({\n      avatar: url,\n    })\n  })\n    .then(res => checkResponse(res, 'Ошибка editAvatar: '))\n}\n\nexport function editProfile(name, about){\n  return fetch(config.baseUrl + URLs.me, {\n    method: 'PATCH',\n    headers:  config.headers,\n    body: JSON.stringify({\n      name: name,\n      about: about\n    })\n  })\n    .then(res => checkResponse(res, 'Ошибка editProfile: '))\n}\n\nexport function addCardOnServer(name, link){\n  return  fetch(config.baseUrl + URLs.cards, {\n    method: 'POST',\n    headers:  config.headers,\n    body: JSON.stringify({\n      name: name,\n      link: link\n    })\n  })\n    .then(res => checkResponse(res, 'Ошибка addCardOnServer: '))\n}\n\nexport function deleteCard(event){\n  const card = event.target.closest('.card');\n  return fetch(config.baseUrl + URLs.cards +'/' + card._id, {\n    method: 'DELETE',\n    headers:  config.headers,\n  })\n    .then(res => checkResponse(res, 'Ошибка deleteCard: '))\n}\n\nexport function likeCard(event){\n  const card = event.target.closest('.card');\n  if (card.myLike){ //удалить\n    return fetch(config.baseUrl + URLs.like + card._id, {\n      method: 'DELETE',\n      headers:  config.headers,\n    })\n      .then(res => checkResponse(res, 'Ошибка delete like: '))\n  } else { // поставить\n    return fetch(config.baseUrl + URLs.like + card._id, {\n      method: 'PUT',\n      headers:  config.headers,\n    })\n      .then(res => checkResponse(res, 'Ошибка put like: '))\n  }\n}\n","const cardTemplate = document.querySelector('#card-template').content;\nconst bigImgPopup = document.querySelector('.big-img');\nconst bigImage = bigImgPopup.querySelector('img');\nconst bigImgCaption = bigImgPopup.querySelector('figcaption');\n\nimport {openPopup} from \"./popup.js\";\nimport {myID} from \"./index.js\";   // перекрестный импорт хз как работает\nimport {deleteCard, likeCard} from \"./api.js\";\n\nfunction refreshLikes(card, json){\n  card.querySelector('.card__like-count').textContent = json.likes.length;\n  card.myLike = json.likes.some(liker => liker._id === myID)\n  if (card.myLike){\n    card.querySelector('.card__like').classList.add('card__like_set')\n  } else {\n    card.querySelector('.card__like').classList.remove('card__like_set')\n  }\n}\n\nfunction createCard(json) {\n  const card = cardTemplate.querySelector('.card').cloneNode(true);\n  card.querySelector('.card__name').textContent = json.name;\n  const cardImg = card.querySelector('.card__image');\n  cardImg.alt = json.name;\n  cardImg.src = json.link;\n  card._id = json._id;\n  card.ownerId = json.owner._id;\n  if (card.ownerId !== myID){\n    card.querySelector('.card__delete').style.display = 'none';\n  } else {\n    const cardDel = card.querySelector('.card__delete');\n    // cardDel.addEventListener('click', deleteCard);\n    cardDel.addEventListener('click', (evt) => {\n      deleteCard(evt)\n        .then(() => {\n          evt.target.closest(\".card\").remove()\n          console.log('delete card success')\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n    })\n  }\n  cardImg.addEventListener('click', () => {\n    bigImage.src = cardImg.src;\n    bigImage.alt = json.name;\n    bigImgCaption.textContent = json.name;\n    openPopup(bigImgPopup);\n  })\n  refreshLikes(card, json);\n  // card.querySelector('.card__like').addEventListener('click', likeCard);\n  card.querySelector('.card__like').addEventListener('click', (evt) => {\n    likeCard(evt)\n      .then((json) => {\n        console.log('put/delete like success');\n        refreshLikes(card, json);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n  })\n  return card;\n}\n\nfunction addCard(card, container, beginning = false) {\n  if(!beginning)\n    container.append(card);\n  else\n    container.prepend(card);\n}\n\nexport {addCard, createCard, refreshLikes};\n","const validationParams = {\n  formSelector: '.form',\n  inputSelector: '.form__field',\n  submitButtonSelector: '.form__button',\n  inactiveButtonClass: 'form__button_disabled',\n  inputErrorClass: 'form__field_error',\n  errorClass: 'form__error_visible',\n}\n\n// функция добавления обработчиков всем полям формы\nconst setEventListeners = (formElement, settings) => {\n\n  const inputList = Array.from(formElement.querySelectorAll(settings.inputSelector));\n  const buttonElement = formElement.querySelector(settings.submitButtonSelector);\n  toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener('input', function () {\n      isValid(formElement, inputElement, settings.inputErrorClass, settings.errorClass);\n      toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n    });\n  });\n};\n\nconst clearPopupInputs = (popup, settings) => {\n  const formElement = popup.querySelector(settings.formSelector);\n  const inputList = Array.from(popup.querySelectorAll(settings.inputSelector));\n  const buttonElement = formElement.querySelector(settings.submitButtonSelector);\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, settings.inputErrorClass, settings.errorClass);\n    inputElement.value = ''\n  });\n  toggleButtonState (inputList, buttonElement, settings.inactiveButtonClass);\n}\n\n// отключение и включение кнопки submit\nfunction toggleButtonState (inputList, buttonElement, inactiveButtonClass){\n  if (hasInvalidInput(inputList)){\n    buttonElement.classList.add(inactiveButtonClass)\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(inactiveButtonClass)\n    buttonElement.disabled = false;\n  }\n}\n\n// проверка наличия хотя бы одного инпут-инвалида\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  })\n};\n\nconst isValid = (formElement, inputElement, inputErrorClass, errorClass) => {\n  if (!inputElement.validity.valid) {\n    showInputError(formElement, inputElement, inputElement.validationMessage, inputErrorClass, errorClass);\n  } else {\n    hideInputError(formElement, inputElement, inputErrorClass, errorClass);\n  }\n};\n\nconst showInputError = (formElement, inputElement, errorMessage, inputErrorClass, errorClass) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n};\n\nconst hideInputError = (formElement, inputElement, inputErrorClass, errorClass) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n\n  inputElement.classList.remove(inputErrorClass);\n  errorElement.classList.remove(errorClass);\n  errorElement.textContent = '';\n};\n\nconst enableValidation = (settings) => {\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\n  formList.forEach((formElement) => {\n    formElement.addEventListener('submit', (evt) => {\n      evt.preventDefault();\n    });\n    setEventListeners(formElement, settings);\n  });\n};\n\nexport {validationParams, clearPopupInputs, enableValidation};\n","const profileName = document.querySelector('.profile__name');\r\nconst profileDescription = document.querySelector('.profile__description');\r\nconst profileAva = document.querySelector('.profile__avatar')\r\n\r\nexport function refreshProfile(name=null, about = null, avatar = null){\r\n  if(name)\r\n    profileName.textContent = name\r\n  if(about)\r\n    profileDescription.textContent = about\r\n  if(avatar)\r\n    profileAva.style.backgroundImage = `url('${avatar}')`;\r\n}\r\n","const content = document.querySelector('.content');\nconst profileAvatar = content.querySelector('.profile__avatar');\nconst avatarEditPopup = document.querySelector('.popup-avatar-edit');\nconst avatarEditForm = avatarEditPopup.querySelector('.form[name=\"popup-avatar-edit-form\"]');// уточнить класс или name\nconst profileEditPopup = document.querySelector('.popup-profile-edit');// уточнить класс\nconst profileEditBtn = content.querySelector('.profile__edit-button');\nconst profileEditForm = profileEditPopup.querySelector('.form[name=\"popup-profile-edit-form\"]');// уточнить класс или name\nconst profileName = content.querySelector('.profile__name');\nconst profileDescription = content.querySelector('.profile__description');\nconst nameInput = profileEditPopup.querySelector('#form__field-name');\nconst descriptionInput = profileEditPopup.querySelector('#form__field-profession');\nconst avatarInput = avatarEditForm.querySelector('#form__field-ava');\nconst cardAddPopup = document.querySelector('.popup-card-add'); // уточнить класс\nconst cardAddBtn = content.querySelector('.profile__add-button');\nconst cardAddForm = cardAddPopup.querySelector('.form[name=\"popup-card-add-form\"]'); // уточнить класс или name\nconst cardNameInput = cardAddPopup.querySelector('#card-add-name');\nconst cardLinkInput = cardAddPopup.querySelector('#card-add-link');\nconst elementsContainer = content.querySelector('.elements');\nconst popups = document.querySelectorAll('.popup');\nconst popupCloseButtons = document.querySelectorAll('.popup__close')\n\nimport  '../pages/index.css';\n\nimport { openPopup, closePopup } from './popup.js';\nimport {addCard, createCard} from './card.js';\nimport {validationParams, clearPopupInputs, enableValidation} from \"./validate.js\";\nimport {getInitialCards, getMe, editProfile, addCardOnServer, editAvatar} from './api.js';\nimport {refreshProfile} from './utils.js';\n\nPromise.all([getInitialCards(), getMe()])\n  .then(([cardsInfo, userInfo]) => {\n    console.log('init cards', cardsInfo);\n    cardsInfo.forEach(el => addCard(createCard(el), elementsContainer));\n\n    console.log('user', userInfo);\n    refreshProfile(userInfo.name, userInfo.about, userInfo.avatar);\n    myID = userInfo._id;\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\nexport let myID;\n\nprofileAvatar.addEventListener('click', () => {\n  clearPopupInputs(avatarEditPopup, validationParams);\n  openPopup(avatarEditPopup);\n});\ncardAddBtn.addEventListener('click', () => openPopup(cardAddPopup));\n\nprofileEditBtn.addEventListener('click', () => {\n  clearPopupInputs(profileEditPopup, validationParams);\n  openPopup(profileEditPopup);\n  nameInput.value = profileName.textContent;\n  descriptionInput.value = profileDescription.textContent;\n})\n\navatarEditForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  avatarEditForm.querySelector('.form__button').textContent = 'Сохранение...'\n  editAvatar(avatarInput.value)\n    .then((json) => {\n      console.log('user avatar updated', json)\n      refreshProfile(null, null, json.avatar)\n      closePopup(avatarEditPopup);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      avatarEditForm.querySelector('.form__button').textContent = 'Сохранить'\n    })\n})\n\nprofileEditForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  profileEditForm.querySelector('.form__button').textContent = 'Сохранение...'\n  editProfile(nameInput.value, descriptionInput.value)\n    .then((json) => {\n      console.log('userinfo updated', json)\n      refreshProfile(json.name, json.about)\n      closePopup(profileEditPopup);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      profileEditForm.querySelector('.form__button').textContent = 'Сохранить'\n    })\n})\n\ncardAddBtn.addEventListener('click', () => {\n  clearPopupInputs(cardAddPopup, validationParams);\n  openPopup(cardAddPopup);\n})\n\ncardAddForm.addEventListener('submit', evt => {\n  evt.preventDefault();\n  cardAddForm.querySelector('.form__button').textContent = 'Сохранение...'\n  addCardOnServer(cardNameInput.value, cardLinkInput.value)\n    .then((json) => {\n      addCard(createCard(json), elementsContainer, true);\n      closePopup(cardAddPopup);\n      cardNameInput.value = '';\n      cardLinkInput.value = '';\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      cardAddForm.querySelector('.form__button').textContent = 'Сохранить'\n    })\n})\n\npopupCloseButtons.forEach(btn => {\n  btn.addEventListener('click', () => {\n    closePopup(btn.closest('.popup'))\n  })\n})\n\npopups.forEach(popup => {\n  popup.addEventListener('click', (evt) => {\n    if (evt.target.classList.contains('popup')) closePopup(popup)\n  })\n})\n\nenableValidation(validationParams);\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","closePopup","popup","classList","remove","document","removeEventListener","ESChandler","openPopup","add","evt","closeOnEscape","addEventListener","config","baseUrl","headers","authorization","URLs","checkResponse","res","errorMes","ok","json","Promise","reject","status","cardTemplate","querySelector","content","bigImgPopup","bigImage","bigImgCaption","refreshLikes","card","textContent","likes","length","myLike","some","liker","_id","myID","createCard","cloneNode","name","cardImg","alt","src","link","ownerId","owner","style","display","event","target","closest","fetch","method","then","deleteCard","console","log","catch","err","likeCard","addCard","container","beginning","prepend","append","validationParams","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","clearPopupInputs","settings","formElement","inputList","Array","from","querySelectorAll","buttonElement","forEach","inputElement","hideInputError","value","toggleButtonState","hasInvalidInput","disabled","validity","valid","showInputError","errorMessage","errorElement","id","profileName","profileDescription","profileAva","refreshProfile","about","avatar","backgroundImage","profileAvatar","avatarEditPopup","avatarEditForm","profileEditPopup","profileEditBtn","profileEditForm","nameInput","descriptionInput","avatarInput","cardAddPopup","cardAddBtn","cardAddForm","cardNameInput","cardLinkInput","elementsContainer","popups","popupCloseButtons","all","cardsInfo","userInfo","el","url","preventDefault","body","JSON","stringify","finally","btn","contains","validationMessage","isValid","setEventListeners"],"sourceRoot":""}